<assembly xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns="http://maven.apache.org/ASSEMBLY/2.0.0"
          xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.0.0 http://maven.apache.org/xsd/assembly-2.0.0.xsd">

    <id>standalone</id>
    <formats>
        <format>dir</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>

    <fileSets>
        <fileSet>
            <directory>${standalone.build.dir}</directory>
            <outputDirectory>${standalone.path}</outputDirectory>
            <excludes>
                <exclude>README.md</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${installer.dir}</directory>
            <outputDirectory>${standalone.path}/installer</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${resources.dir}</directory>
            <outputDirectory>${standalone.path}</outputDirectory>
            <includes>
                <include>README.md</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${resources.dir}</directory>
            <outputDirectory>${standalone.path}/config</outputDirectory>
            <excludes>
                <exclude>README.md</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}</directory>
            <outputDirectory>${standalone.path}/services/model-service</outputDirectory>
            <includes>
                <include>${project.build.finalName}.${project.packaging}</include>
            </includes>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <unpack>false</unpack>
            <includes>

                <include>com.sdl.dxa:dxa-model-service-controller</include>
                <include>com.sdl.dxa:dxa-model-service-odata</include>
                <include>com.sdl.dxa:dxa-data-model</include>
                <include>com.sdl.dxa:dxa-common</include>
                <include>com.sdl.dxa:dxa-tridion-common</include>

                <include>com.sdl.web:web-ambient-api</include>
                <include>com.sdl.web:web-ambient-engine</include>
                <include>com.sdl.web:web-ambient-client</include>
                <!-- Needed?
                                audiencemanager_common-8.6.0.jar
                                audiencemanager_core-8.6.0.jar
                                audiencemanager_odata_client-8.6.0.jar
                                audiencemanager_odata_models-8.6.0.jar
                                audiencemanager_profile_compatibility-8.6.0.jar
                                audiencemanager_tracking_compatibility-8.6.0.jar
                  -->
                <include>javax.cache:cache-api</include>

                <include>com.tridion:cd_common_config_legacy</include>
                <include>com.tridion:cd_core</include>
                <include>com.tridion:cd_model</include>

                <include>com.tridion:cd_preview_content_ambient</include>
                <include>com.tridion:cd_preview_content_client</include>
                <include>com.tridion:cd_preview_content_common</include>

                <include>commons-beanutils:commons-beanutils</include>
                <include>commons-collections:commons-collections</include>
                <include>org.apache.commons:commons-lang3</include>
                <include>commons-io:commons-io</include>
                <include>commons-codec:commons-codec</include>
                <include>org.apache.commons:commons-compress</include>
                <include>org.apache.commons:commons-pool2</include>

                <include>com.sdl.web:content-ambient-client</include>
                <include>com.sdl.web:content-ambient-model</include>
                <include>com.sdl.web:content-api</include>
                <include>com.sdl.web:content-broker</include>
                <include>com.sdl.web:content-client-api</include>
                <include>com.sdl.web:content-compatible</include>
                <include>com.sdl.web:content-core</include>
                <include>com.sdl.web:content-dynamic</include>
                <include>com.sdl.web:content-linking</include>
                <include>com.sdl.web:content-model</include>
                <include>com.sdl.web:content-tags</include>

                <include>com.sdl.web:discovery-registration-api</include>

                <include>com.sdl.web:context-api</include>
                <include>com.sdl.web:context-client</include>
                <include>com.sdl.web:context-image-proxy</include>
                <include>com.sdl.web:context-service-common</include>

                <include>org.dd4t:dd4t-*</include>

                <include>com.sdl.web:discovery-client-lightweight</include>
                <include>com.sdl.web:discovery-common</include>

                <include>net.sf.dozer:dozer</include>

                <include>org.ehcache:ehcache</include>
                <include>io.github.lukehutch:fast-classpath-scanner</include>
                <include>de.ruedigermoeller:fst</include>
                <include>com.google.code.gson:gson</include>

                <include>org.apache.httpcomponents:httpclient</include>
                <include>org.apache.httpcomponents:httpcore</include>

                <include>com.fasterxml.jackson.module:jackson-module-afterburner</include>
                <include>com.fasterxml.jackson.datatype:jackson-datatype-joda</include>
                <include>com.fasterxml.jackson.datatype:jackson-datatype-jdk8</include>

                <include>org.fusesource.jansi:jansi</include>
                <include>org.javassist:javassist</include>

                <include>redis.clients:jedis</include>
                <!-- TODO check what is needed here
                javax.annotation-api-1.2.jar
                javax.el-api-2.2.5.jar
                javax.inject-2.5.0-b05.jar
                javax.ws.rs-api-2.0.1.jar

                jersey-client-2.23.2.jar
                jersey-common-2.23.2.jar
                jersey-guava-2.23.2.jar
                -->

                <include>org.codehaus.jettison:jettison</include>

                <include>joda-time:joda-time</include>
                <include>org.jsoup:jsoup</include>
                <include>com.google.guava:guava</include>

                <include>org.projectlombok:lombok</include>
                <include>com.sdl.web:web-oauth</include>
                <include>com.sdl.web:web-oauth-common</include>

                <include>org.objenesis:objenesis</include>

                <include>com.sdl:odata_api</include>
                <include>com.sdl:odata_client_api</include>
                <include>com.sdl:odata_client</include>
                <include>com.sdl:odata_edm</include>
                <include>com.sdl:odata_parser</include>
                <include>com.sdl:odata_renderer</include>

                <include>org.scala-lang.modules:scala-parser-combinators_2.12</include>
                <include>org.scala-lang:scala-library</include>
                <include>org.simpleframework:simple-xml</include>

                <!-- TODO needs el-api, jdom, oro? -->
                <include>com.tridion.smarttarget:smarttarget_core</include>
                <include>com.tridion.smarttarget:smarttarget_entitymodel</include>

                <include>org.springframework:spring-context-support</include>
                <include>org.springframework.boot:spring-boot-starter-cache</include>

                <!--stax-1.2.0.jar - needed?-->
                <include>stax:stax</include>
                <include>javax.xml.stream:stax-api</include>
                <include>javax.validation:validation-api</include>

                <!--ugc-api-10.1.0-1018.jar-->
                <!--ugc-client-api-10.1.0-1018.jar-->
                <!--ugc-client-common-10.1.0-1018.jar-->
                <!--ugc-model-10.1.0-1018.jar-->
                <!--ugc-taglib-10.1.0-1018.jar-->
                <!--ugc-tcdl-10.1.0-1018.jar-->

                <include>com.sdl.web:xo-client</include>
                <include>com.sdl.web:xo-client-compatible</include>
                <include>com.sdl.web:xo-model</include>
                <!-- Needed?-->
                <include>xpp3:xpp3</include>
            </includes>
            <outputDirectory>${standalone.path}/services/model-service</outputDirectory>
        </dependencySet>
    </dependencySets>

</assembly>
