<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<Configuration Version="8.5"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:noNamespaceSchemaLocation="schemas/cd_ambient_conf.xsd">
    <Security OAuthEnabled="${MS_SECURITY_ENABLED:-true}">
        <RequestValidator>com.sdl.web.oauth.validator.OAuth2RequestValidator</RequestValidator>
        <!-- Ambient data framework claims forwarding is enabled for the requests coming from white listed IP addresses. -->
        <WhiteList>
            <IPAddresses>
                <!-- WARNING: this range should be changed as in this state accepts claims from any IP -->
                <Ip>0.0.0.0-255.255.255.255</Ip>
            </IPAddresses>
        </WhiteList>
        <!-- Ambient data framework claims forwarding is allowed only for claims listed in this section. -->
        <GloballyAcceptedClaims>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:useragent:browser"/>
            <Claim Uri="taf:claim:ambientdata:footprintcartridge:acceptlanguage"/>
            <Claim Uri="taf:claim:ambientdata:footprintcartridge:recurringvisitor"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:useragent:os"/>
            <Claim Uri="taf:claim:ambientdata:footprintcartridge:searchquery"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:session:lifetime"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:refererdomain"/>

            <Claim Uri="taf:session:preview:preview_session"/>
            <Claim Uri="taf:claim:ambientdata:footprintcartridge:acceptlanguage"/>
            <Claim Uri="taf:claim:ambientdata:footprintcartridge:recurringvisitor"/>
            <Claim Uri="taf:claim:ambientdata:footprintcartridge:searchquery"/>
            <Claim Uri="taf:claim:ambientdata:definedtriggertypes"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:refererdomain"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:useragent:isbot"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:authorization:type"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:session:lifetime"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:useragent:browser"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:authorization:isauthenticated"/>
            <Claim Uri="taf:claim:ambientdata:sessioncartridge:useragent:os"/>
            <Claim Uri="taf:claim:audiencemanager:contact:keywords"/>
            <Claim Uri="taf:claim:audiencemanager:contact:segments"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:city"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:company"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:age"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:identification:source"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:prefix"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:birth:date"/>
            <Claim Uri="taf:claim:audiencemanager:contact:extendeddetail:working:years"/>
        </GloballyAcceptedClaims>
        <!-- Header and cookie validation options -->
        <!--
        <HeaderValidation>
            <DigestKey>sample_passphrase</DigestKey>
            <GracePeriodEndDate>2016-01-01T12:00:00</GracePeriodEndDate>
        </HeaderValidation>
        -->
        <!--
        Built-in authentication server's configuration.
        -->
        <AuthenticationServer>
            <SharedSecret>sample_passphrase</SharedSecret>
        </AuthenticationServer>

        <!-- Rules definition for read/write shielding of services. -->
        <Rules Enabled="${oauthenabled:-true}"/>
    </Security>

    <!-- Excluded Paths -->
    <!-- You can add paths relative to the context path for which the Ambient Framework Filter shouldn't execute.
    This is very probable to happen when you map the Ambient Framework Filter to /* path.
    You may want to exclude, for example, the path with which the upload servlet is mapped to. -->


    <ExcludedPaths>
        <!--
           <Path>/token.svc</Path>
        -->
    </ExcludedPaths>
    <Cartridges>
        <!-- Example cartridge definition -->
        <!-- You can hook into and use the Ambient Data Framework by implementing cartridges.
        This is how a cartridge XML configuration files can be specified. -->
        <!--
            <Cartridge File="cd_ambient_cartridge_conf.xml"/>
            -->

        <!-- turn on for Session Preview

        <Cartridge File="cd_webservice_preview_cartridge.xml" Category="SYSTEM"/>
        <Cartridge File="cd_webservice_preview_cartridge.xml"/>

        <Cartridge File="footprint_cartridge_conf.xml"/>
        -->
        <!-- <Cartridge File="session_cartridge_conf.xml"/> -->
    </Cartridges>

    <!-- Cookies settings -->
    <!--
      <Cookies>
          <CookieClaim DefaultValue="true" Name="CookieClaim"/>
          <Cookie Type="Tracking" Name="myTrackingCookie" Path="/"/>
          <Cookie Type="Session" Name="mySessionCookie" Path="/"/>
          <Cookie Type="ADF" Name="TAFContext" />
      </Cookies>
      -->
</Configuration>
